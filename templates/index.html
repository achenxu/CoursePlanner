<!DOCTYPE html>
<html>
    <body>
        <form id="form" method='POST' action="">
            Classes:<br>
            
            <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
            <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
            <script>
                var availableTags = {{ autocomplete|tojson }};
                $( function() {
                  $( "input" ).autocomplete({ source: availableTags });
                });
            </script>
            <input id="courseField" type="text" name="course" value="">
            <input type="hidden" id="classes" name="classes" value="">
            
            
            
            <script>
                var courses = [];
                
                function insert() {
                    var field = document.getElementById("courseField");
                    if (availableTags.indexOf(field.value) > -1) {
                        courses.push(field.value);
                        field.value = "";
                        document.getElementById("current").innerHTML = courses.join(",");
                    }
                }
            </script>
            <input id="add" type="button" value="Add" onclick="insert()">
            
            
            
            <script>
                function submission() {
                    var classfield = document.getElementById("classes");
                    if (courses.length == 0) {
                        alert("Please enter courses!");
                    } else {
                        classfield.value = courses.join(",");
                        document.getElementById("form").submit();
                    }
                }
            </script>
            <br><br>
            <p id="current"></p>
            <input type="button" onclick="submission()" value="Generate">
            <br>
            {% for schedule in result %}
            <br>
            <label> {{ schedule["name"] }} </label>
            <br>
            <table>
            {% for c in schedule["courses"] %}
                <tr>
                    <th> {{ c["crn"] }} </th>
                    <td> {{ c["id"] }} </td>
                    <td> {{ c["name"] }} </td>
                    <td> {{ c["instructor"] }} </td>
                    <td> {{ c["enrolled"] }} / {{ c["seats"] }} </td>
                </tr>
            {% endfor %}
            </table>
            {% endfor %}
        </form>
    </body>
</html>
